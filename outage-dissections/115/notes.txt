Dissecting Atlassian’s Mega Outage

Dissecting Atlassian's Outage April 2022 What ? 400-1 experienced happened Cloud customers full outage across Atlassian products " " deleted Data of these customers was permanently and it will take a few weeks to restore the data This outage teaches us so much about - Multi - tenant architecture Importance of having Disaster Recovery Strategy - a the their - provides us insights about architecture and engineering practices Insight 1 : reported data loss for up to 5 minutes prior to incident ¥ Sira El El DB Backup × Incremental backup CDC 1 5 minutes ] every

Insight 2 : Product upgrade : Deactivating legacy app C 1 Deactivate legacy app legacy App C2 in favour of a shiny c3 new version ! New version CG * They used their existing cs scripts to deactivate the legacy version Insight 3 : Mark for deletion vfs Permanently Delete Mark deletion is deleted for : soft delete True - = - - recovery is possible Permanent deletion : - hard delete DELETE FROM t . . . - recovery not possible Why delete ? Compliance we ever permanently GDPR the gives users ' ' Right to be forgotten

Insight 4 : High Availability using synchronous replication To maintain high availability : Synchronous Standby Replicas ¥ El El User DB Synchronous Standby Replica WRITE > ① write flushed > ① write flushed OK < OK < Insight 5 : Immutable Backups thy Protection against ☒ → data corruption standby + 4 Replica serialized Error correction codes into some format Immutable backup

Insight 6 : Not truly a multi - tenant architecture [ data ] FI Each customer should have an FI FI isolated 2 independent setup in a multi - tenant arch ¥1 TÉ Making it easy to backup and restore data of individual customer TÉ FÉ FÉ But have individual if we DB for each customer . the cost will be MASSIVE so atlassian like other companies does this , , many ↳ 9¥ IF - - - - Data of multiple customers are present in single data store - Because the incremental backups are customer - agnostic , they are backed up together on the backup site . 631

Why time to restore the data ? it taking - Data store L Data store 2 Data store 3 Say they deleted data of customers cz.ca and C> But because in the archive the data of the entire data store is kept , it is extremely time consuming to restore the fragment of information Restoring the entire DB is easy id C- id . . - - - - - . . 100 C snapshot → restore , But it will also restore the data 125 Cz 722 C , Of undelekd customers 967 Cos I data loss ! ! 1096 Cz leading to 2709 Cz eg : Restoring the entire data of it Data Store L will also restore for unaffected Ci and ↳