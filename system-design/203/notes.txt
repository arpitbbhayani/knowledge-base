How Giphy uses CDN to serve millions to GIFs

How Giphy uses CDN to serve millions GIFs of host giphy : . serve and search GIFs 10 Billion content served every day and serving API is easy efficient But the real !! challenge is serving Images because API are short responses because images / videos are large to CDN ! ! Hence serve them efficiently we need { > CDN < > API > Mh3 Raw images CDN ? what Giphy caches on Because responses do not Media content videos change often images - , search and Discover API responses / v1 / gifs / trending / v1 / search ? 9 = funny

? Why CDN - geographical nearness 53 content is served from the to the edge servers near user . Drawback of single layer o Each edge server has its own cache . When content goes viral , ' multiple edge gets request - > Edges < - cache miss 0 < Edge 2 < 5 Origin # > 7 - load on origin > Edge 3 a S3 / Search Ee Solution : Multi-layer CDN Edge I Edge 2 Shield 1 Origin Edge 3 Shield 2 Edge 4

Route specific TTL Not all content is cached for the same duration smaller duration / v1 / gits / trending cached for / gift duration 12345 . gif cached for longer Response configured caching Response headers Max - age and s - maxage tell the duration of caching for specific Origin can CDN response cache invalidation by grouping - invalidate cached API responses that contains a specific GIF - invalidate all cached API responses from an API key API support Cxiphy provides SDK and ' ' where contains heard invalidate cached API responses w query - . because something new came up all of this is achieved through surrogate keys